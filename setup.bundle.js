"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[350,975,367],{222:(e,t,o)=>{o.d(t,{EB:()=>s,N1:()=>d,Sj:()=>p,Sk:()=>a,ZW:()=>n,hj:()=>u});var r=o(227);let i=document.querySelector(".project-container"),l=(document.querySelector(".project-template"),document.querySelector(".edit-project-popup")),c=document.querySelector(".edit-todo-popup");function d(e,t,o){let i=e.projectArr;t.innerHTML="",i.forEach((i=>{let c=o.cloneNode(!0);c.classList.remove("nodisplay","project-template"),c.querySelector(".project-title").innerText=i.title,c.querySelector(".delete").addEventListener("click",(l=>{r.Ih.removeProjectByTitle(i.title),r.MP.title===i.title&&(0,r.Ce)(e.projectArr[0]),console.log(JSON.stringify(r.Ih)),localStorage.setItem("USER",JSON.stringify(r.Ih)),d(e,t,o),a(r.MP),l.stopPropagation()})),c.querySelector(".edit").addEventListener("click",(e=>{l.querySelector(".ipt-title").value=i.title,l.querySelector(".ipt-title").placeholder=i.title,s(l,r.zi),l.dataset.title=i.title,e.stopPropagation()})),c.addEventListener("click",(e=>{(0,r.Ce)(i)})),t.appendChild(c)})),a(r.MP)}function n(e,t,o){let i=["--r","--b","--g"],l=e.todoArr;t.innerHTML="",l.forEach((l=>{let d=o.cloneNode(!0),a=d.querySelector(".todo-completed");d.classList.remove("nodisplay","todo-template"),d.querySelector(".todo-title").innerText=l.title,d.querySelector(".todo-description").innerText=l.description,d.querySelector(".todo-dueDate").innerText=l.dueDate,a.checked=l.completed,d.classList.add(i[l.priority]),d.querySelector(".delete").addEventListener("click",(i=>{r.MP.removeTodoByTitle(l.title),localStorage.setItem("USER",JSON.stringify(r.Ih)),n(e,t,o),console.log(e)})),d.querySelector(".edit").addEventListener("click",(e=>{c.querySelector(".ipt-title").value=l.title,c.querySelector(".ipt-title").placeholder=l.title,c.querySelector(".ipt-description").value=l.description,c.querySelector(".ipt-dueDate").value=l.dueDate,c.querySelector(".ipt-priority").value=l.priority,s(c,r.zi),c.dataset.title=l.title,e.stopPropagation()})),a.addEventListener("click",(e=>{l.completed=!l.completed,l.completed?d.classList.add("completed"):d.classList.remove("completed"),e.stopPropagation()})),l.completed?d.classList.add("completed"):d.classList.remove("completed"),t.appendChild(d)}))}function a(e){let t=e.title;i.querySelectorAll(".project-div").forEach((e=>{let o=e.querySelector(".project-title"),r=null;null!==o&&(r=o.innerText),r===t?e.classList.add("selected"):e.classList.remove("selected")}))}function s(e,t){e.classList.add("visible"),t.classList.add("visible")}function u(e,t){e.classList.remove("visible"),t.classList.remove("visible")}function p(e,t,o){e.querySelector(t).innerText=o}},227:(e,t,o)=>{o.d(t,{Ce:()=>q,Ih:()=>l,MP:()=>c,cY:()=>E,zi:()=>d});var r=o(222),i=o(831);let l,c,d=document.querySelector(".backdrop"),n=document.querySelector(".project-container"),a=document.querySelector(".project-template"),s=document.querySelector(".todo-container"),u=document.querySelector(".todo-template"),p=document.querySelector(".add-project"),S=document.querySelector(".project-popup"),y=document.querySelector(".add-todo"),v=document.querySelector(".todo-popup"),m=document.querySelector(".edit-project-popup"),T=document.querySelector(".edit-todo-popup");function q(e){c=e,(0,r.N1)(l,n,a),(0,r.ZW)(c,s,u),(0,r.Sk)(c)}let j,f=localStorage.getItem("USER"),h=JSON.parse(f);function E(){p.addEventListener("click",(e=>{(0,r.EB)(S,d)})),y.addEventListener("click",(e=>{(0,r.EB)(v,d)})),function(){let e=v.querySelector(".confirm");v.querySelector(".cancel").addEventListener("click",(e=>{(0,r.hj)(v,d)})),e.addEventListener("click",(e=>{let t=v.querySelector(".ipt-title").value;if(-1!==c.getTodoIdByTitle(t))return void(0,r.Sj)(v,".title-error","This Title Already Exists!");if(""===t)return void(0,r.Sj)(v,".title-error","It Must Have A Title!");(0,r.Sj)(v,".title-error","");let o=v.querySelector(".ipt-description").value,i=v.querySelector(".ipt-dueDate").value,n=v.querySelector(".ipt-priority").value;c.createTodo(t,o,i,n,!1),localStorage.setItem("USER",JSON.stringify(l)),(0,r.hj)(v,d),(0,r.ZW)(c,s,u)}));let t=S.querySelector(".confirm");S.querySelector(".cancel").addEventListener("click",(e=>{(0,r.hj)(S,d)})),t.addEventListener("click",(e=>{let t=S.querySelector(".ipt-title").value;-1===l.projectIdWithTitle(t)?""!==t?((0,r.Sj)(S,".title-error",""),l.createProject(t),localStorage.setItem("USER",JSON.stringify(l)),(0,r.hj)(S,d),(0,r.N1)(j,n,a)):(0,r.Sj)(S,".title-error","It Must Have A Title!"):(0,r.Sj)(S,".title-error","This Title Already Exists!")}));let o=m.querySelector(".confirm");m.querySelector(".cancel").addEventListener("click",(e=>{(0,r.hj)(m,d)})),o.addEventListener("click",(e=>{let t=m.querySelector(".ipt-title").value;-1===l.projectIdWithTitle(t)?""!==t?((0,r.Sj)(m,".title-error",""),l.projectWithTitle(m.dataset.title).title=t,localStorage.setItem("USER",JSON.stringify(l)),(0,r.hj)(m,d),(0,r.N1)(j,n,a)):(0,r.Sj)(m,".title-error","It Must Have A Title!"):(0,r.Sj)(m,".title-error","This Title Already Exists!")}));let i=T.querySelector(".confirm");T.querySelector(".cancel").addEventListener("click",(e=>{(0,r.hj)(T,d)})),i.addEventListener("click",(e=>{let t=T.querySelector(".ipt-title").value,o=T.querySelector(".ipt-description").value,i=T.querySelector(".ipt-dueDate").value,n=T.querySelector(".ipt-priority").value;if(-1!==c.getTodoIdByTitle(t)&&t!==T.dataset.title)return void(0,r.Sj)(T,".title-error","This Title Already Exists!");if(""===t)return void(0,r.Sj)(T,".title-error","It Must Have A Title!");(0,r.Sj)(T,".title-error",""),console.log(T.dataset.title),console.log(c.todoWithTitle(T.dataset.title));let a=c.todoWithTitle(T.dataset.title);a.title=t,a.description=o,a.dueDate=i,a.priority=n,(0,r.hj)(T,d),c.sortTodos(),localStorage.setItem("USER",JSON.stringify(l)),(0,r.ZW)(c,s,u)}))}(),q(l.projectWithTitle("Get A Job"))}console.log("USER: "),null===h?(j=(0,i.Ad)("Guest"),j.createTodo("Get A Job","Learn A Skill","Web-Development","2024-01-01",0),j.createTodo("Get A Job","Apply For Jobs","","2024-04-01",1),j.createTodo("Get A Wife","Find A Woman","Usually In The Streets","2023-07-05",0),j.createTodo("Get A Wife","Talk To A Woman","Use Words","2024-12-11",1),j.createTodo("Get A Wife","Finish This List","","",2)):(j=(0,i.Ad)(h.username),h.projectArr.forEach((e=>{let t=(0,i.q0)(e.title);j.addProject(t),e.todoArr.forEach((e=>{t.createTodo(e.title,e.description,e.dueDate,e.priority,e.completed)}))}))),console.log(j),console.log(JSON.parse(JSON.stringify(j))),function(e){l=e}(j)},831:(e,t,o)=>{o.d(t,{Ad:()=>i,q0:()=>r});const r=e=>{let t=[];const o=e=>{t.push(e),r()},r=()=>{t.sort(i)},i=(e,t)=>{if(e.priority<t.priority)return-1},l=e=>{let o=c(e);void 0!==o&&t.splice(o,1)},c=e=>t.findIndex((t=>t.title===e.title));return{title:e,todoArr:t,addTodo:o,removeTodo:l,createTodo:(e,t,r,i,l)=>{null==l&&(l=!1);let c=((e,t,o,r,i)=>({title:e,description:t,dueDate:o,priority:r,completed:i}))(e,t,r,i,l);o(c)},getTodoIdByTitle:e=>t.findIndex((t=>t.title===e)),removeTodoByTitle:e=>{let o=t.find((t=>t.title===e));void 0!==o&&l(o)},todoWithTitle:e=>t.find((t=>t.title===e)),sortTodos:r}},i=e=>{let t=[];const o=e=>{t.push(e)},i=e=>t.find((t=>t.title===e)),l=e=>{let o=c(e);void 0!==o&&t.splice(o,1)},c=e=>t.findIndex((t=>t.title===e.title));return{username:e,projectArr:t,addProject:o,createProject:e=>{o(r(e))},removeProject:l,createTodo:(e,t,l,c,d,n)=>{let a=i(e);void 0===a&&(a=r(e),o(a)),a.createTodo(t,l,c,d,n)},addTodo:(e,t)=>{let l=i(e);void 0===l&&(l=r(e),o(l)),l.addTodo(t)},projectWithTitle:i,projectIdWithTitle:e=>t.findIndex((t=>t.title===e)),removeProjectByTitle:e=>{let o=t.find((t=>t.title===e));void 0!==o&&l(o)}}}}},e=>{e(e.s=227)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3pCekIsRUFBVzFFLElBRWZBLEVBQVE2RSxRQUFRQyxFQUFTLEVBNEJ6QlosbUJBQ0FILG1CQWxEd0JrQyxHQUNmcEcsRUFBVzRGLFdBQVVDLEdBQVVBLEVBQVFwRixRQUFVMkYsSUFrRDFESSxxQkFwQjBCL0YsSUFDMUIsSUFBSU4sRUFBVUgsRUFBV2lHLE1BQUs5RixHQUFXQSxFQUFRTSxRQUFVQSxTQUM1Q2lGLElBQVp2RixHQUNIa0csRUFBY2xHLEVBQVEsRUFrQnpCLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZGlzcGxheUZ1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc2V0dXAuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3RvZG9PYmplY3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGN1cnJlbnRQcm9qZWN0LCBDdXJyZW50VXNlciwgc2V0Q3VycmVudFByb2plY3QsIHNldEN1cnJlbnRVc2VyLCBiYWNrZHJvcCB9IGZyb20gXCIuL3NldHVwXCI7XG5cbmxldCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWNvbnRhaW5lclwiKTtcbmxldCBwcm9qZWN0VGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGVtcGxhdGVcIik7XG5cblxubGV0IGVkaXRQcm9qZWN0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvamVjdC1wb3B1cFwiKTtcbmxldCBlZGl0VG9kb1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tcG9wdXBcIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdHModXNlciwgUHJvamVjdENvbnRhaW5lciwgcHJvamVjdFRlbXBsYXRlKXtcbiAgICBsZXQgcHJvamVjdEFyciA9IHVzZXIucHJvamVjdEFycjtcbiAgICBQcm9qZWN0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgcHJvamVjdEFyci5mb3JFYWNoKHByb2plY3QgPT4ge1xuICAgICAgICBsZXQgcHJvamVjdENsb25lID0gcHJvamVjdFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgcHJvamVjdENsb25lLmNsYXNzTGlzdC5yZW1vdmUoXCJub2Rpc3BsYXlcIiwgXCJwcm9qZWN0LXRlbXBsYXRlXCIpXG4gICAgICAgIHByb2plY3RDbG9uZS5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtdGl0bGVcIikuaW5uZXJUZXh0ID0gcHJvamVjdC50aXRsZTtcblxuICAgICAgICBsZXQgZGVsZXRlQnV0dG9uID0gcHJvamVjdENsb25lLnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlXCIpO1xuXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICAgICAgQ3VycmVudFVzZXIucmVtb3ZlUHJvamVjdEJ5VGl0bGUocHJvamVjdC50aXRsZSk7XG4gICAgICAgICAgICBpZihjdXJyZW50UHJvamVjdC50aXRsZSA9PT0gcHJvamVjdC50aXRsZSkgc2V0Q3VycmVudFByb2plY3QodXNlci5wcm9qZWN0QXJyWzBdKTtcblxuXG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KEN1cnJlbnRVc2VyKSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnVVNFUicsIEpTT04uc3RyaW5naWZ5KEN1cnJlbnRVc2VyKSk7XG4gICAgICAgICAgICBkaXNwbGF5UHJvamVjdHModXNlciwgUHJvamVjdENvbnRhaW5lciwgcHJvamVjdFRlbXBsYXRlKTtcbiAgICAgICAgICAgIFNlbGVjdGVkUHJvamVjdENoYW5nZVN0eWxlKGN1cnJlbnRQcm9qZWN0KTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgZWRpdEJ1dHRvbiA9IHByb2plY3RDbG9uZS5xdWVyeVNlbGVjdG9yKFwiLmVkaXRcIik7XG5cbiAgICAgICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICAgICAgZWRpdFByb2plY3RQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmlwdC10aXRsZVwiKS52YWx1ZSA9IHByb2plY3QudGl0bGU7XG4gICAgICAgICAgICBlZGl0UHJvamVjdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaXB0LXRpdGxlXCIpLnBsYWNlaG9sZGVyID0gcHJvamVjdC50aXRsZTtcblxuXG4gICAgICAgICAgICBkaXNwbGF5UG9wdXAoZWRpdFByb2plY3RQb3B1cCxiYWNrZHJvcCk7XG4gICAgICAgICAgICBlZGl0UHJvamVjdFBvcHVwLmRhdGFzZXQudGl0bGUgPSBwcm9qZWN0LnRpdGxlO1xuXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBwcm9qZWN0Q2xvbmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PntcbiAgICAgICAgICAgIHNldEN1cnJlbnRQcm9qZWN0KHByb2plY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICBQcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3RDbG9uZSk7XG4gICAgfSk7XG5cbiAgICBTZWxlY3RlZFByb2plY3RDaGFuZ2VTdHlsZShjdXJyZW50UHJvamVjdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VG9kb3MocHJvamVjdCwgdG9kb0NvbnRhaW5lciwgdG9kb1RlbXBsYXRlKXtcblxuICAgIGxldCBwcmlvcml0eUNvbG9ycyA9IFtcIi0tclwiLCBcIi0tYlwiLCBcIi0tZ1wiXTtcblxuXG4gICAgbGV0IHRvZG9BcnIgPSBwcm9qZWN0LnRvZG9BcnI7XG4gICAgdG9kb0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHRvZG9BcnIuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgbGV0IHRvZG9DbG9uZSA9IHRvZG9UZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIGxldCB0b2RvQ2hlY2tib3ggPSB0b2RvQ2xvbmUucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbXBsZXRlZFwiKTtcblxuXG4gICAgICAgIHRvZG9DbG9uZS5jbGFzc0xpc3QucmVtb3ZlKFwibm9kaXNwbGF5XCIsIFwidG9kby10ZW1wbGF0ZVwiKVxuICAgICAgICB0b2RvQ2xvbmUucXVlcnlTZWxlY3RvcihcIi50b2RvLXRpdGxlXCIpLmlubmVyVGV4dCA9IHRvZG8udGl0bGU7XG4gICAgICAgIHRvZG9DbG9uZS5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tZGVzY3JpcHRpb25cIikuaW5uZXJUZXh0ID0gdG9kby5kZXNjcmlwdGlvbjtcbiAgICAgICAgdG9kb0Nsb25lLnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1kdWVEYXRlXCIpLmlubmVyVGV4dCA9IHRvZG8uZHVlRGF0ZTtcbiAgICAgICAgdG9kb0NoZWNrYm94LmNoZWNrZWQgPSB0b2RvLmNvbXBsZXRlZDtcblxuICAgIFxuICAgICAgICB0b2RvQ2xvbmUuY2xhc3NMaXN0LmFkZChwcmlvcml0eUNvbG9yc1t0b2RvLnByaW9yaXR5XSk7XG5cbiAgICAgICAgbGV0IGRlbGV0ZUJ1dHRvbiA9IHRvZG9DbG9uZS5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZVwiKTtcblxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PntcbiAgICAgICAgICAgIGN1cnJlbnRQcm9qZWN0LnJlbW92ZVRvZG9CeVRpdGxlKHRvZG8udGl0bGUpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1VTRVInLCBKU09OLnN0cmluZ2lmeShDdXJyZW50VXNlcikpO1xuICAgICAgICAgICAgZGlzcGxheVRvZG9zKHByb2plY3QsIHRvZG9Db250YWluZXIsIHRvZG9UZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgZWRpdEJ1dHRvbiA9IHRvZG9DbG9uZS5xdWVyeVNlbGVjdG9yKFwiLmVkaXRcIik7XG5cbiAgICAgICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICAgICAgZWRpdFRvZG9Qb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmlwdC10aXRsZVwiKS52YWx1ZSA9IHRvZG8udGl0bGU7XG4gICAgICAgICAgICBlZGl0VG9kb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaXB0LXRpdGxlXCIpLnBsYWNlaG9sZGVyID0gdG9kby50aXRsZTtcblxuICAgICAgICAgICAgZWRpdFRvZG9Qb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmlwdC1kZXNjcmlwdGlvblwiKS52YWx1ZSA9IHRvZG8uZGVzY3JpcHRpb247XG4gICAgICAgICAgICBlZGl0VG9kb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaXB0LWR1ZURhdGVcIikudmFsdWUgPSB0b2RvLmR1ZURhdGU7XG4gICAgICAgICAgICBlZGl0VG9kb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaXB0LXByaW9yaXR5XCIpLnZhbHVlID0gdG9kby5wcmlvcml0eTsgXG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGlzcGxheVBvcHVwKGVkaXRUb2RvUG9wdXAsYmFja2Ryb3ApO1xuICAgICAgICAgICAgZWRpdFRvZG9Qb3B1cC5kYXRhc2V0LnRpdGxlID0gdG9kby50aXRsZTtcblxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdG9kb0NoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT57XG4gICAgICAgICAgICB0b2RvLmNvbXBsZXRlZCA9ICF0b2RvLmNvbXBsZXRlZDtcbiAgICAgICAgICAgIGlmKHRvZG8uY29tcGxldGVkKSB0b2RvQ2xvbmUuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlZFwiKTtcbiAgICAgICAgICAgIGVsc2UgdG9kb0Nsb25lLmNsYXNzTGlzdC5yZW1vdmUoXCJjb21wbGV0ZWRcIik7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIGlmKHRvZG8uY29tcGxldGVkKSB0b2RvQ2xvbmUuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlZFwiKTtcbiAgICAgICAgZWxzZSB0b2RvQ2xvbmUuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlZFwiKTtcblxuICAgICAgICB0b2RvQ29udGFpbmVyLmFwcGVuZENoaWxkKHRvZG9DbG9uZSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3RlZFByb2plY3RDaGFuZ2VTdHlsZShwcm9qZWN0KXtcbiAgICBsZXQgdGl0bGUgPSBwcm9qZWN0LnRpdGxlO1xuICAgIGxldCBwcm9qZWN0RWxlbWVudHMgPSAgcHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3QtZGl2XCIpO1xuICAgIHByb2plY3RFbGVtZW50cy5mb3JFYWNoKHByb2plY3RFbGVtZW50ID0+IHtcbiAgICAgICAgbGV0IHRpdGxlRWxlbWVudCA9IHByb2plY3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC10aXRsZVwiKTtcbiAgICAgICAgbGV0IHByb2plY3RFbGVtZW50VGl0bGUgPSBudWxsO1xuICAgICAgICBpZih0aXRsZUVsZW1lbnQgIT09IG51bGwpIHByb2plY3RFbGVtZW50VGl0bGUgPSB0aXRsZUVsZW1lbnQuaW5uZXJUZXh0O1xuXG4gICAgICAgIGlmKHByb2plY3RFbGVtZW50VGl0bGUgPT09IHRpdGxlKXtcbiAgICAgICAgICAgIHByb2plY3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgcHJvamVjdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UG9wdXAocG9wdXBFbGVtZW50LCBiYWNrZHJvcCl7XG4gICAgcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpO1xuICAgIGJhY2tkcm9wLmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZVBvcHVwKHBvcHVwRWxlbWVudCwgYmFja2Ryb3Ape1xuICAgIHBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKTtcbiAgICBiYWNrZHJvcC5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKTtcbn1cblxuXG5cblxuIFxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlFcnJvcihwb3B1cCwgZXJyb3JDbGFzcywgZXJyb3JUZXh0KXtcbiAgICBwb3B1cC5xdWVyeVNlbGVjdG9yKGVycm9yQ2xhc3MpLmlubmVyVGV4dD1lcnJvclRleHQ7XG59IiwiaW1wb3J0IHsgZGlzcGxheVBvcHVwLCBoaWRlUG9wdXAsIGRpc3BsYXlFcnJvciwgZGlzcGxheVRvZG9zLCBTZWxlY3RlZFByb2plY3RDaGFuZ2VTdHlsZSB9IGZyb20gXCIuL2Rpc3BsYXlGdW5jdGlvbnNcIjtcbmltcG9ydCB7IHRvZG9JdGVtRmFjdG9yeSwgcHJvamVjdEZhY3RvcnksIHVzZXJGYWN0b3J5IH0gZnJvbSAnLi90b2RvT2JqZWN0cyc7XG5pbXBvcnQgeyBkaXNwbGF5UHJvamVjdHMgfSBmcm9tICcuL2Rpc3BsYXlGdW5jdGlvbnMnO1xuXG5cbmV4cG9ydCBsZXQgYmFja2Ryb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJhY2tkcm9wXCIpO1xuXG5sZXQgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1jb250YWluZXJcIik7XG5sZXQgcHJvamVjdFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXRlbXBsYXRlXCIpO1xuXG5cbmxldCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKTtcbmxldCB0b2RvVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tdGVtcGxhdGVcIik7XG5cblxubGV0IGFkZFByb2plY3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1wcm9qZWN0XCIpO1xubGV0IGFkZFByb2plY3RQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1wb3B1cFwiKTtcblxubGV0IGFkZFRvZG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10b2RvXCIpO1xubGV0IGFkZFRvZG9Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1wb3B1cFwiKTtcblxubGV0IGVkaXRQcm9qZWN0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvamVjdC1wb3B1cFwiKTtcbmxldCBlZGl0VG9kb1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tcG9wdXBcIik7XG5cblxuXG5leHBvcnQgbGV0IEN1cnJlbnRVc2VyO1xuZXhwb3J0IGxldCBjdXJyZW50UHJvamVjdDtcbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50VXNlcih1c2VyKXtcbiAgICBDdXJyZW50VXNlciA9IHVzZXI7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRQcm9qZWN0KHByb2plY3Qpe1xuICAgIGN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdDtcbiAgICBkaXNwbGF5UHJvamVjdHMoQ3VycmVudFVzZXIscHJvamVjdENvbnRhaW5lcixwcm9qZWN0VGVtcGxhdGUpO1xuICAgIGRpc3BsYXlUb2RvcyhjdXJyZW50UHJvamVjdCx0b2RvQ29udGFpbmVyLHRvZG9UZW1wbGF0ZSk7XG4gICAgU2VsZWN0ZWRQcm9qZWN0Q2hhbmdlU3R5bGUoY3VycmVudFByb2plY3QpO1xufTtcblxuXG5sZXQgcmV0cmlldmVkVXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdVU0VSJyk7XG5sZXQgdXNlckpzb24gPSBKU09OLnBhcnNlKHJldHJpZXZlZFVzZXIpO1xuY29uc29sZS5sb2coJ1VTRVI6ICcsICk7XG5sZXQgdXNlclxuXG5pZih1c2VySnNvbiA9PT0gbnVsbCl7XG4gICAgdXNlciA9IHVzZXJGYWN0b3J5KFwiR3Vlc3RcIik7XG4gICAgdXNlci5jcmVhdGVUb2RvKFwiR2V0IEEgSm9iXCIsIFwiTGVhcm4gQSBTa2lsbFwiLCBcIldlYi1EZXZlbG9wbWVudFwiLCBcIjIwMjQtMDEtMDFcIiwgMCk7XG4gICAgdXNlci5jcmVhdGVUb2RvKFwiR2V0IEEgSm9iXCIsIFwiQXBwbHkgRm9yIEpvYnNcIiwgXCJcIiwgXCIyMDI0LTA0LTAxXCIsIDEpO1xuICAgIHVzZXIuY3JlYXRlVG9kbyhcIkdldCBBIFdpZmVcIiwgXCJGaW5kIEEgV29tYW5cIiwgXCJVc3VhbGx5IEluIFRoZSBTdHJlZXRzXCIsIFwiMjAyMy0wNy0wNVwiLCAwKTtcbiAgICB1c2VyLmNyZWF0ZVRvZG8oXCJHZXQgQSBXaWZlXCIsIFwiVGFsayBUbyBBIFdvbWFuXCIsIFwiVXNlIFdvcmRzXCIsIFwiMjAyNC0xMi0xMVwiLCAxKTtcbiAgICB1c2VyLmNyZWF0ZVRvZG8oXCJHZXQgQSBXaWZlXCIsIFwiRmluaXNoIFRoaXMgTGlzdFwiLCBcIlwiLCBcIlwiLCAyKTtcbn1lbHNlIHtcbiAgICBcbiAgICB1c2VyID0gdXNlckZhY3RvcnkodXNlckpzb24udXNlcm5hbWUpO1xuICAgIGxldCBwcm9qZWN0QXJyID0gdXNlckpzb24ucHJvamVjdEFycjtcbiAgICBwcm9qZWN0QXJyLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgIGxldCBuZXdQcm9qZWN0ID0gcHJvamVjdEZhY3RvcnkocHJvamVjdC50aXRsZSk7XG4gICAgICAgIHVzZXIuYWRkUHJvamVjdChuZXdQcm9qZWN0KTtcbiAgICAgICAgbGV0IHRvZG9BcnIgPSBwcm9qZWN0LnRvZG9BcnI7XG4gICAgICAgIHRvZG9BcnIuZm9yRWFjaCh0b2RvID0+e1xuICAgICAgICAgICAgbmV3UHJvamVjdC5jcmVhdGVUb2RvKHRvZG8udGl0bGUsIHRvZG8uZGVzY3JpcHRpb24sIHRvZG8uZHVlRGF0ZSwgdG9kby5wcmlvcml0eSwgdG9kby5jb21wbGV0ZWQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuXG5cbmNvbnNvbGUubG9nKHVzZXIpO1xuXG5cbmNvbnNvbGUubG9nKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodXNlcikpKTtcblxuc2V0Q3VycmVudFVzZXIodXNlcik7XG5cblxuXG5cblxuXG5cblxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwKCl7XG4gICAgc2V0dXBBZGRCdXR0b25zKCk7XG4gICAgc2V0dXBQb3B1cEJ1dHRvbnMoKTtcblxuICAgIHNldEN1cnJlbnRQcm9qZWN0KEN1cnJlbnRVc2VyLnByb2plY3RXaXRoVGl0bGUoXCJHZXQgQSBKb2JcIikpO1xufVxuXG5cblxuZnVuY3Rpb24gc2V0dXBBZGRCdXR0b25zKCl7XG4gICAgYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XG4gICAgICAgICAgICBkaXNwbGF5UG9wdXAoYWRkUHJvamVjdFBvcHVwLCBiYWNrZHJvcCk7XG4gICAgfSk7XG5cbiAgICBhZGRUb2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSk9PntcbiAgICAgICAgICAgIGRpc3BsYXlQb3B1cChhZGRUb2RvUG9wdXAsIGJhY2tkcm9wKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0dXBQb3B1cEJ1dHRvbnMoKXtcbiAgICBsZXQgYWRkVG9kb0NvbmZpcm1CdXR0b24gPSBhZGRUb2RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5jb25maXJtXCIpO1xuICAgIGxldCBhZGRUb2RvQ2FuY2VsQnV0dG9uID0gYWRkVG9kb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsXCIpO1xuXG4gICAgYWRkVG9kb0NhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICBoaWRlUG9wdXAoYWRkVG9kb1BvcHVwLCBiYWNrZHJvcCk7XG4gICAgfSk7XG5cbiAgICBhZGRUb2RvQ29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICBsZXQgdGl0bGUgPSBhZGRUb2RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5pcHQtdGl0bGVcIikudmFsdWU7XG5cbiAgICAgICAgaWYoY3VycmVudFByb2plY3QuZ2V0VG9kb0lkQnlUaXRsZSh0aXRsZSkgIT09IC0xKSB7XG4gICAgICAgICAgICBkaXNwbGF5RXJyb3IoYWRkVG9kb1BvcHVwLCBcIi50aXRsZS1lcnJvclwiLCBcIlRoaXMgVGl0bGUgQWxyZWFkeSBFeGlzdHMhXCIpO1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYodGl0bGUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGRpc3BsYXlFcnJvcihhZGRUb2RvUG9wdXAsIFwiLnRpdGxlLWVycm9yXCIsIFwiSXQgTXVzdCBIYXZlIEEgVGl0bGUhXCIpO1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgZGlzcGxheUVycm9yKGFkZFRvZG9Qb3B1cCwgXCIudGl0bGUtZXJyb3JcIiwgXCJcIik7XG5cbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gYWRkVG9kb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaXB0LWRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgICAgICBsZXQgZHVlRGF0ZSA9IGFkZFRvZG9Qb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmlwdC1kdWVEYXRlXCIpLnZhbHVlO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSBhZGRUb2RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5pcHQtcHJpb3JpdHlcIikudmFsdWU7XG4gICAgXG4gICAgICAgIGN1cnJlbnRQcm9qZWN0LmNyZWF0ZVRvZG8odGl0bGUsZGVzY3JpcHRpb24sZHVlRGF0ZSxwcmlvcml0eSwgZmFsc2UpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnVVNFUicsIEpTT04uc3RyaW5naWZ5KEN1cnJlbnRVc2VyKSk7XG4gICAgICAgIGhpZGVQb3B1cChhZGRUb2RvUG9wdXAsIGJhY2tkcm9wKTtcbiAgICAgICAgZGlzcGxheVRvZG9zKGN1cnJlbnRQcm9qZWN0LCB0b2RvQ29udGFpbmVyLCB0b2RvVGVtcGxhdGUpO1xuICAgIH0pO1xuXG5cbiAgICBsZXQgYWRkUHJvamVjdENvbmZpcm1CdXR0b24gPSBhZGRQcm9qZWN0UG9wdXAucXVlcnlTZWxlY3RvcihcIi5jb25maXJtXCIpO1xuICAgIGxldCBhZGRQcm9qZWN0Q2FuY2VsQnV0dG9uID0gYWRkUHJvamVjdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsXCIpO1xuXG4gICAgYWRkUHJvamVjdENhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICBoaWRlUG9wdXAoYWRkUHJvamVjdFBvcHVwLCBiYWNrZHJvcCk7XG4gICAgfSk7XG5cbiAgICBhZGRQcm9qZWN0Q29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICBsZXQgdGl0bGUgPSBhZGRQcm9qZWN0UG9wdXAucXVlcnlTZWxlY3RvcihcIi5pcHQtdGl0bGVcIikudmFsdWU7XG5cbiAgICAgICAgaWYoQ3VycmVudFVzZXIucHJvamVjdElkV2l0aFRpdGxlKHRpdGxlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGRpc3BsYXlFcnJvcihhZGRQcm9qZWN0UG9wdXAsIFwiLnRpdGxlLWVycm9yXCIsIFwiVGhpcyBUaXRsZSBBbHJlYWR5IEV4aXN0cyFcIik7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZih0aXRsZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgZGlzcGxheUVycm9yKGFkZFByb2plY3RQb3B1cCwgXCIudGl0bGUtZXJyb3JcIiwgXCJJdCBNdXN0IEhhdmUgQSBUaXRsZSFcIik7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBkaXNwbGF5RXJyb3IoYWRkUHJvamVjdFBvcHVwLCBcIi50aXRsZS1lcnJvclwiLCBcIlwiKTtcblxuICAgICAgICBDdXJyZW50VXNlci5jcmVhdGVQcm9qZWN0KHRpdGxlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1VTRVInLCBKU09OLnN0cmluZ2lmeShDdXJyZW50VXNlcikpO1xuICAgICAgICBoaWRlUG9wdXAoYWRkUHJvamVjdFBvcHVwLCBiYWNrZHJvcCk7XG4gICAgICAgIGRpc3BsYXlQcm9qZWN0cyh1c2VyLHByb2plY3RDb250YWluZXIscHJvamVjdFRlbXBsYXRlKTtcbiAgICB9KTtcblxuICAgIGxldCBlZGl0UHJvamVjdENvbmZpcm1CdXR0b24gPSBlZGl0UHJvamVjdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuY29uZmlybVwiKTtcbiAgICBsZXQgZWRpdFByb2plY3RDYW5jZWxCdXR0b24gPSBlZGl0UHJvamVjdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsXCIpO1xuXG4gICAgZWRpdFByb2plY3RDYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PntcbiAgICAgICAgaGlkZVBvcHVwKGVkaXRQcm9qZWN0UG9wdXAsIGJhY2tkcm9wKTtcbiAgICB9KTtcblxuICAgIGVkaXRQcm9qZWN0Q29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICBsZXQgdGl0bGUgPSBlZGl0UHJvamVjdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaXB0LXRpdGxlXCIpLnZhbHVlO1xuXG4gICAgICAgIGlmKEN1cnJlbnRVc2VyLnByb2plY3RJZFdpdGhUaXRsZSh0aXRsZSkgIT09IC0xKSB7XG4gICAgICAgICAgICBkaXNwbGF5RXJyb3IoZWRpdFByb2plY3RQb3B1cCwgXCIudGl0bGUtZXJyb3JcIiwgXCJUaGlzIFRpdGxlIEFscmVhZHkgRXhpc3RzIVwiKTtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmKHRpdGxlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBkaXNwbGF5RXJyb3IoZWRpdFByb2plY3RQb3B1cCwgXCIudGl0bGUtZXJyb3JcIiwgXCJJdCBNdXN0IEhhdmUgQSBUaXRsZSFcIik7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBkaXNwbGF5RXJyb3IoZWRpdFByb2plY3RQb3B1cCwgXCIudGl0bGUtZXJyb3JcIiwgXCJcIik7XG5cbiAgICAgICAgXG4gICAgICAgIEN1cnJlbnRVc2VyLnByb2plY3RXaXRoVGl0bGUoZWRpdFByb2plY3RQb3B1cC5kYXRhc2V0LnRpdGxlKS50aXRsZSA9IHRpdGxlO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnVVNFUicsIEpTT04uc3RyaW5naWZ5KEN1cnJlbnRVc2VyKSk7XG4gICAgICAgIGhpZGVQb3B1cChlZGl0UHJvamVjdFBvcHVwLCBiYWNrZHJvcCk7XG4gICAgICAgIGRpc3BsYXlQcm9qZWN0cyh1c2VyLHByb2plY3RDb250YWluZXIscHJvamVjdFRlbXBsYXRlKTtcbiAgICB9KTtcblxuXG4gICAgbGV0IGVkaXRUb2RvQ29uZmlybUJ1dHRvbiA9IGVkaXRUb2RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5jb25maXJtXCIpO1xuICAgIGxldCBlZGl0VG9kb0NhbmNlbEJ1dHRvbiA9IGVkaXRUb2RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5jYW5jZWxcIik7XG5cbiAgICBlZGl0VG9kb0NhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+e1xuICAgICAgICBoaWRlUG9wdXAoZWRpdFRvZG9Qb3B1cCwgYmFja2Ryb3ApO1xuICAgIH0pO1xuXG4gICAgZWRpdFRvZG9Db25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT57XG4gICAgICAgIGxldCB0aXRsZSA9IGVkaXRUb2RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5pcHQtdGl0bGVcIikudmFsdWU7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGVkaXRUb2RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5pcHQtZGVzY3JpcHRpb25cIikudmFsdWU7XG4gICAgICAgIGxldCBkdWVEYXRlID0gZWRpdFRvZG9Qb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmlwdC1kdWVEYXRlXCIpLnZhbHVlO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSBlZGl0VG9kb1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaXB0LXByaW9yaXR5XCIpLnZhbHVlO1xuXG5cbiAgICAgICAgaWYoY3VycmVudFByb2plY3QuZ2V0VG9kb0lkQnlUaXRsZSh0aXRsZSkgIT09IC0xKSB7XG4gICAgICAgICAgICBpZih0aXRsZSAhPT0gZWRpdFRvZG9Qb3B1cC5kYXRhc2V0LnRpdGxlKXtcbiAgICAgICAgICAgIGRpc3BsYXlFcnJvcihlZGl0VG9kb1BvcHVwLCBcIi50aXRsZS1lcnJvclwiLCBcIlRoaXMgVGl0bGUgQWxyZWFkeSBFeGlzdHMhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKHRpdGxlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBkaXNwbGF5RXJyb3IoZWRpdFRvZG9Qb3B1cCwgXCIudGl0bGUtZXJyb3JcIiwgXCJJdCBNdXN0IEhhdmUgQSBUaXRsZSFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGlzcGxheUVycm9yKGVkaXRUb2RvUG9wdXAsIFwiLnRpdGxlLWVycm9yXCIsIFwiXCIpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGVkaXRUb2RvUG9wdXAuZGF0YXNldC50aXRsZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRQcm9qZWN0LnRvZG9XaXRoVGl0bGUoZWRpdFRvZG9Qb3B1cC5kYXRhc2V0LnRpdGxlKSk7XG5cbiAgICAgICAgbGV0IGVkaXRlZFRvZG8gPSBjdXJyZW50UHJvamVjdC50b2RvV2l0aFRpdGxlKGVkaXRUb2RvUG9wdXAuZGF0YXNldC50aXRsZSk7XG5cbiAgICAgICAgZWRpdGVkVG9kby50aXRsZSA9IHRpdGxlO1xuICAgICAgICBlZGl0ZWRUb2RvLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIGVkaXRlZFRvZG8uZHVlRGF0ZSA9IGR1ZURhdGU7XG5cblxuICAgICAgICBlZGl0ZWRUb2RvLnByaW9yaXR5ID0gcHJpb3JpdHk7XG5cbiAgICAgICAgaGlkZVBvcHVwKGVkaXRUb2RvUG9wdXAsIGJhY2tkcm9wKTtcblxuICAgICAgICBjdXJyZW50UHJvamVjdC5zb3J0VG9kb3MoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1VTRVInLCBKU09OLnN0cmluZ2lmeShDdXJyZW50VXNlcikpO1xuICAgICAgICBkaXNwbGF5VG9kb3MoY3VycmVudFByb2plY3QsdG9kb0NvbnRhaW5lcix0b2RvVGVtcGxhdGUpO1xuICAgIH0pO1xuICAgIFxuXG5cbn1cblxuXG5cbiIsIlxuZXhwb3J0IGNvbnN0IHRvZG9JdGVtRmFjdG9yeSA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBjb21wbGV0ZWQpID0+e1xuICAgIHJldHVybntcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICBkdWVEYXRlLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgY29tcGxldGVkXG4gICAgfTtcbn07XG5cblxuZXhwb3J0IGNvbnN0IHByb2plY3RGYWN0b3J5ID0gKHRpdGxlKSA9PntcbiAgICBsZXQgdG9kb0FyciA9IFtdO1xuXG4gICAgY29uc3QgYWRkVG9kbyA9ICh0b2RvSXRlbSkgPT57XG4gICAgICAgIHRvZG9BcnIucHVzaCh0b2RvSXRlbSk7XG4gICAgICAgIHNvcnRUb2RvcygpO1xuICAgIH07XG5cbiAgICBjb25zdCBzb3J0VG9kb3MgPSAoKT0+e1xuICAgICAgICB0b2RvQXJyLnNvcnQoc29ydEZuKTtcbiAgICAgICAgXG4gICAgfTtcblxuICAgIGNvbnN0IHNvcnRGbiA9IChhLGIpID0+e1xuICAgICAgICBpZihhLnByaW9yaXR5IDwgYi5wcmlvcml0eSkgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZVRvZG8gPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgY29tcGxldGVkKSA9PntcbiAgICAgICAgaWYoY29tcGxldGVkID09PSBudWxsIHx8IGNvbXBsZXRlZCA9PT0gdW5kZWZpbmVkKSBjb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IG5ld1RvZG9JdGVtID0gdG9kb0l0ZW1GYWN0b3J5KHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlZCk7XG4gICAgICAgIGFkZFRvZG8obmV3VG9kb0l0ZW0pO1xuICAgIH07XG5cbiAgICBjb25zdCByZW1vdmVUb2RvID0gKHRvZG9JdGVtKSA9PntcbiAgICAgICAgbGV0IGlkID0gZ2V0VG9kb0lkKHRvZG9JdGVtKTtcbiAgICAgICAgaWYoaWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB0b2RvQXJyLnNwbGljZShpZCwgMSk7XG4gICAgfTsgICBcblxuICAgIGNvbnN0IHJlbW92ZVRvZG9CeVRpdGxlID0gKHRpdGxlKSA9PntcbiAgICAgICAgbGV0IHRvZG8gPSB0b2RvQXJyLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LnRpdGxlID09PSB0aXRsZSk7XG4gICAgICAgIGlmKHRvZG8gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICByZW1vdmVUb2RvKHRvZG8pO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRUb2RvSWQgPSAodG9kb0l0ZW0pID0+e1xuICAgICAgICByZXR1cm4gdG9kb0Fyci5maW5kSW5kZXgoZWxlbWVudCA9PiBlbGVtZW50LnRpdGxlID09PSB0b2RvSXRlbS50aXRsZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGdldFRvZG9JZEJ5VGl0bGUgPSAodGl0bGUpID0+e1xuICAgICAgICByZXR1cm4gdG9kb0Fyci5maW5kSW5kZXgoZWxlbWVudCA9PiBlbGVtZW50LnRpdGxlID09PSB0aXRsZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHRvZG9XaXRoVGl0bGUgPSAodGl0bGUpID0+e1xuICAgICAgICByZXR1cm4gdG9kb0Fyci5maW5kKGVsZW1lbnQgPT4gZWxlbWVudC50aXRsZSA9PT0gdGl0bGUpO1xuICAgIH1cblxuICAgIHJldHVybntcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIHRvZG9BcnIsXG4gICAgICAgIGFkZFRvZG8sXG4gICAgICAgIHJlbW92ZVRvZG8sXG4gICAgICAgIGNyZWF0ZVRvZG8sXG4gICAgICAgIGdldFRvZG9JZEJ5VGl0bGUsXG4gICAgICAgIHJlbW92ZVRvZG9CeVRpdGxlLFxuICAgICAgICB0b2RvV2l0aFRpdGxlLFxuICAgICAgICBzb3J0VG9kb3MsXG4gICAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VyRmFjdG9yeSA9ICh1c2VybmFtZSkgPT57XG4gICAgbGV0IHByb2plY3RBcnIgPVtdO1xuXG4gICAgY29uc3QgYWRkUHJvamVjdCA9IChwcm9qZWN0SXRlbSkgPT57XG4gICAgICAgIHByb2plY3RBcnIucHVzaChwcm9qZWN0SXRlbSk7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBjcmVhdGVQcm9qZWN0ID0gKHRpdGxlKSA9PntcbiAgICAgICAgYWRkUHJvamVjdChwcm9qZWN0RmFjdG9yeSh0aXRsZSkpOyAgICAgICAgXG4gICAgfTtcblxuICAgIGNvbnN0IHByb2plY3RXaXRoVGl0bGUgPSAocHJvamVjdE5hbWUpID0+e1xuICAgICAgICBsZXQgcHJvamVjdCA9IHByb2plY3RBcnIuZmluZChlbGVtZW50ID0+ZWxlbWVudC50aXRsZSA9PT0gcHJvamVjdE5hbWUpO1xuICAgICAgICByZXR1cm4gcHJvamVjdDtcbiAgICB9O1xuXG4gICAgY29uc3QgcHJvamVjdElkV2l0aFRpdGxlID0gKHByb2plY3ROYW1lKSA9PntcbiAgICAgICAgbGV0IGlkID0gcHJvamVjdEFyci5maW5kSW5kZXgoZWxlbWVudCA9PmVsZW1lbnQudGl0bGUgPT09IHByb2plY3ROYW1lKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH07XG5cblxuICAgIGNvbnN0IGNyZWF0ZVRvZG8gPSAocHJvamVjdFRpdGxlLCB0b2RvVGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgY29tcGxldGVkKSA9PntcbiAgICAgICAgbGV0IHByb2plY3QgPSBwcm9qZWN0V2l0aFRpdGxlKHByb2plY3RUaXRsZSk7XG4gICAgICAgIGlmKHByb2plY3QgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICBwcm9qZWN0ID0gcHJvamVjdEZhY3RvcnkocHJvamVjdFRpdGxlKTtcbiAgICAgICAgICAgIGFkZFByb2plY3QocHJvamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvamVjdC5jcmVhdGVUb2RvKHRvZG9UaXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBjb21wbGV0ZWQpO1xuICAgIH07XG5cbiAgICBjb25zdCBhZGRUb2RvID0gKHByb2plY3RUaXRsZSwgdG9kb0l0ZW0pID0+e1xuICAgICAgICBsZXQgcHJvamVjdCA9IHByb2plY3RXaXRoVGl0bGUocHJvamVjdFRpdGxlKTtcbiAgICAgICAgaWYocHJvamVjdCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHByb2plY3QgPSBwcm9qZWN0RmFjdG9yeShwcm9qZWN0VGl0bGUpO1xuICAgICAgICAgICAgYWRkUHJvamVjdChwcm9qZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBwcm9qZWN0LmFkZFRvZG8odG9kb0l0ZW0pO1xuICAgIH07XG5cblxuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAocHJvamVjdEl0ZW0pID0+e1xuICAgICAgICBsZXQgaWQgPSBnZXRUb2RvSWQocHJvamVjdEl0ZW0pO1xuICAgICAgICBpZihpZCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgIHByb2plY3RBcnIuc3BsaWNlKGlkLCAxKTtcbiAgICB9OyAgIFxuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ5VGl0bGUgPSAodGl0bGUpID0+e1xuICAgICAgICBsZXQgcHJvamVjdCA9IHByb2plY3RBcnIuZmluZChwcm9qZWN0ID0+IHByb2plY3QudGl0bGUgPT09IHRpdGxlKTtcbiAgICAgICAgaWYocHJvamVjdCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgIHJlbW92ZVByb2plY3QocHJvamVjdCk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0VG9kb0lkID0gKHByb2plY3RJdGVtKSA9PntcbiAgICAgICAgcmV0dXJuIHByb2plY3RBcnIuZmluZEluZGV4KGVsZW1lbnQgPT4gZWxlbWVudC50aXRsZSA9PT0gcHJvamVjdEl0ZW0udGl0bGUpO1xuICAgIH07XG5cbiAgICByZXR1cm57XG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBwcm9qZWN0QXJyLFxuICAgICAgICBhZGRQcm9qZWN0LFxuICAgICAgICBjcmVhdGVQcm9qZWN0LFxuICAgICAgICByZW1vdmVQcm9qZWN0LFxuICAgICAgICBjcmVhdGVUb2RvLFxuICAgICAgICBhZGRUb2RvLFxuICAgICAgICBwcm9qZWN0V2l0aFRpdGxlLFxuICAgICAgICBwcm9qZWN0SWRXaXRoVGl0bGUsXG4gICAgICAgIHJlbW92ZVByb2plY3RCeVRpdGxlXG4gICAgfTtcbn1cblxuXG4iXSwibmFtZXMiOlsicHJvamVjdENvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVkaXRQcm9qZWN0UG9wdXAiLCJlZGl0VG9kb1BvcHVwIiwiZGlzcGxheVByb2plY3RzIiwidXNlciIsIlByb2plY3RDb250YWluZXIiLCJwcm9qZWN0VGVtcGxhdGUiLCJwcm9qZWN0QXJyIiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsInByb2plY3QiLCJwcm9qZWN0Q2xvbmUiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJpbm5lclRleHQiLCJ0aXRsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiU2VsZWN0ZWRQcm9qZWN0Q2hhbmdlU3R5bGUiLCJzdG9wUHJvcGFnYXRpb24iLCJ2YWx1ZSIsInBsYWNlaG9sZGVyIiwiZGlzcGxheVBvcHVwIiwiZGF0YXNldCIsImFwcGVuZENoaWxkIiwiZGlzcGxheVRvZG9zIiwidG9kb0NvbnRhaW5lciIsInRvZG9UZW1wbGF0ZSIsInByaW9yaXR5Q29sb3JzIiwidG9kb0FyciIsInRvZG8iLCJ0b2RvQ2xvbmUiLCJ0b2RvQ2hlY2tib3giLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJjaGVja2VkIiwiY29tcGxldGVkIiwiYWRkIiwicHJpb3JpdHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdEVsZW1lbnQiLCJ0aXRsZUVsZW1lbnQiLCJwcm9qZWN0RWxlbWVudFRpdGxlIiwicG9wdXBFbGVtZW50IiwiYmFja2Ryb3AiLCJoaWRlUG9wdXAiLCJkaXNwbGF5RXJyb3IiLCJwb3B1cCIsImVycm9yQ2xhc3MiLCJlcnJvclRleHQiLCJDdXJyZW50VXNlciIsImN1cnJlbnRQcm9qZWN0IiwiYWRkUHJvamVjdEJ1dHRvbiIsImFkZFByb2plY3RQb3B1cCIsImFkZFRvZG9CdXR0b24iLCJhZGRUb2RvUG9wdXAiLCJzZXRDdXJyZW50UHJvamVjdCIsInJldHJpZXZlZFVzZXIiLCJnZXRJdGVtIiwidXNlckpzb24iLCJwYXJzZSIsInNldHVwIiwiYWRkVG9kb0NvbmZpcm1CdXR0b24iLCJnZXRUb2RvSWRCeVRpdGxlIiwiY3JlYXRlVG9kbyIsImFkZFByb2plY3RDb25maXJtQnV0dG9uIiwicHJvamVjdElkV2l0aFRpdGxlIiwiY3JlYXRlUHJvamVjdCIsImVkaXRQcm9qZWN0Q29uZmlybUJ1dHRvbiIsInByb2plY3RXaXRoVGl0bGUiLCJlZGl0VG9kb0NvbmZpcm1CdXR0b24iLCJ0b2RvV2l0aFRpdGxlIiwiZWRpdGVkVG9kbyIsInNvcnRUb2RvcyIsInNldHVwUG9wdXBCdXR0b25zIiwidXNlcm5hbWUiLCJuZXdQcm9qZWN0IiwiYWRkUHJvamVjdCIsInNldEN1cnJlbnRVc2VyIiwicHJvamVjdEZhY3RvcnkiLCJhZGRUb2RvIiwidG9kb0l0ZW0iLCJwdXNoIiwic29ydCIsInNvcnRGbiIsImEiLCJiIiwicmVtb3ZlVG9kbyIsImlkIiwiZ2V0VG9kb0lkIiwidW5kZWZpbmVkIiwic3BsaWNlIiwiZmluZEluZGV4IiwiZWxlbWVudCIsIm5ld1RvZG9JdGVtIiwidG9kb0l0ZW1GYWN0b3J5IiwicmVtb3ZlVG9kb0J5VGl0bGUiLCJmaW5kIiwidXNlckZhY3RvcnkiLCJwcm9qZWN0SXRlbSIsInByb2plY3ROYW1lIiwicmVtb3ZlUHJvamVjdCIsInByb2plY3RUaXRsZSIsInRvZG9UaXRsZSIsInJlbW92ZVByb2plY3RCeVRpdGxlIl0sInNvdXJjZVJvb3QiOiIifQ==